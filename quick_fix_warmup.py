# -*- coding: utf-8 -*-
"""
å¿«é€Ÿä¿®å¤é¢„çƒ­å¡ä½é—®é¢˜
"""

from config import Config

def quick_fix_options():
    """æ˜¾ç¤ºå¿«é€Ÿä¿®å¤é€‰é¡¹"""
    print("=" * 60)
    print("ğŸš¨ ç³»ç»Ÿé¢„çƒ­å¡ä½ - å¿«é€Ÿè§£å†³æ–¹æ¡ˆ")
    print("=" * 60)
    
    print("æ ¹æ®æ‚¨çš„æƒ…å†µï¼Œæœ‰ä»¥ä¸‹å‡ ç§è§£å†³æ–¹æ¡ˆï¼š")
    print()
    
    print("1. ğŸš€ ç«‹å³å¯åŠ¨ï¼ˆæ¨èï¼‰")
    print("   - è·³è¿‡é¢„çƒ­æ£€æŸ¥ï¼Œç«‹å³å¼€å§‹å‘é€")
    print("   - é€‚åˆï¼šæƒ³è¦å¿«é€Ÿå¼€å§‹ç›‘æ§")
    print()
    
    print("2. âš¡ å¿«é€Ÿæ¨¡å¼")
    print("   - é™ä½é¢„çƒ­è¦æ±‚åˆ°15ç§’")
    print("   - é€‚åˆï¼šå¸Œæœ›æœ‰æ•°æ®æ£€æŸ¥ä½†ç­‰å¾…æ—¶é—´çŸ­")
    print()
    
    print("3. ğŸ”§ è°ƒæ•´å½“å‰é¢„çƒ­å‚æ•°")
    print("   - æ‰‹åŠ¨é™ä½é¢„çƒ­è¦æ±‚")
    print("   - é€‚åˆï¼šæƒ³è¦è‡ªå®šä¹‰è®¾ç½®")
    print()
    
    print("4. ğŸ”„ é‡å¯ç¨‹åº")
    print("   - å¯èƒ½æ˜¯WebSocketè¿æ¥é—®é¢˜")
    print("   - é€‚åˆï¼šç½‘ç»œè¿æ¥ä¸ç¨³å®š")

def apply_instant_start():
    """åº”ç”¨ç«‹å³å¯åŠ¨æ¨¡å¼"""
    print("\nğŸš€ æ­£åœ¨åº”ç”¨ç«‹å³å¯åŠ¨æ¨¡å¼...")
    Config.DATA_WARMUP_CONFIG['å¯ç”¨é¢„çƒ­æ£€æŸ¥'] = False
    print("âœ… å·²ç¦ç”¨é¢„çƒ­æ£€æŸ¥")
    print("ğŸ’¡ ç³»ç»Ÿå°†åœ¨åˆå§‹åŒ–å®Œæˆåç«‹å³å¼€å§‹å‘é€")
    return True

def apply_fast_mode():
    """åº”ç”¨å¿«é€Ÿæ¨¡å¼"""
    print("\nâš¡ æ­£åœ¨åº”ç”¨å¿«é€Ÿæ¨¡å¼...")
    success = Config.set_warmup_preset('å¿«é€Ÿæ¨¡å¼')
    if success:
        print("âœ… å·²åˆ‡æ¢åˆ°å¿«é€Ÿæ¨¡å¼")
        print(f"ğŸ’¡ æ–°çš„é¢„çƒ­é…ç½®: {Config.DATA_WARMUP_CONFIG}")
        return True
    else:
        print("âŒ å¿«é€Ÿæ¨¡å¼åº”ç”¨å¤±è´¥")
        return False

def apply_custom_settings():
    """åº”ç”¨è‡ªå®šä¹‰è®¾ç½®"""
    print("\nğŸ”§ æ­£åœ¨åº”ç”¨å®½æ¾çš„é¢„çƒ­è®¾ç½®...")
    Config.DATA_WARMUP_CONFIG.update({
        'å¯åŠ¨ç­‰å¾…æ—¶é—´': 15,
        'æœ€å°æ›´æ–°æ¬¡æ•°': 3,
        'æœ€å°è®¢å•æ•°é‡': 1,
        'å¯ç”¨é¢„çƒ­æ£€æŸ¥': True
    })
    print("âœ… å·²åº”ç”¨å®½æ¾è®¾ç½®")
    print("ğŸ’¡ æ–°çš„è¦æ±‚: 15ç§’ + 3æ¬¡æ›´æ–° + 1æ¡è®¢å•")
    return True

def interactive_fix():
    """äº¤äº’å¼ä¿®å¤"""
    quick_fix_options()
    
    try:
        choice = input("\nè¯·é€‰æ‹©è§£å†³æ–¹æ¡ˆ (1-4): ").strip()
        
        if choice == "1":
            return apply_instant_start()
        elif choice == "2":
            return apply_fast_mode()
        elif choice == "3":
            return apply_custom_settings()
        elif choice == "4":
            print("\nğŸ”„ è¯·æ‰‹åŠ¨é‡å¯ä¸»ç¨‹åº")
            print("   Ctrl+C åœæ­¢å½“å‰ç¨‹åºï¼Œç„¶åé‡æ–°è¿è¡Œ python main.py")
            return False
        else:
            print("âŒ æ— æ•ˆé€‰æ‹©")
            return False
            
    except KeyboardInterrupt:
        print("\næ“ä½œå–æ¶ˆ")
        return False

# éäº¤äº’å¼å¿«é€Ÿä¿®å¤ï¼ˆæ¨èç»™å¡ä½çš„ç”¨æˆ·ï¼‰
def emergency_fix():
    """ç´§æ€¥ä¿®å¤ - ç›´æ¥åº”ç”¨æœ€å®½æ¾çš„è®¾ç½®"""
    print("ğŸš¨ ç´§æ€¥ä¿®å¤æ¨¡å¼ - åº”ç”¨æœ€å®½æ¾è®¾ç½®")
    print()
    
    print("æ­£åœ¨åº”ç”¨ä»¥ä¸‹è®¾ç½®:")
    print("- å¯ç”¨é¢„çƒ­æ£€æŸ¥: False (ç«‹å³å¯åŠ¨)")
    print("- å¤‡ç”¨è®¾ç½®: ç­‰å¾…5ç§’ + 1æ¬¡æ›´æ–° + 1æ¡è®¢å•")
    
    # ä¸»è¦æ–¹æ¡ˆï¼šç›´æ¥ç¦ç”¨é¢„çƒ­
    Config.DATA_WARMUP_CONFIG['å¯ç”¨é¢„çƒ­æ£€æŸ¥'] = False
    
    # å¤‡ç”¨æ–¹æ¡ˆï¼šè®¾ç½®æå®½æ¾çš„è¦æ±‚
    Config.DATA_WARMUP_CONFIG.update({
        'å¯åŠ¨ç­‰å¾…æ—¶é—´': 5,
        'æœ€å°æ›´æ–°æ¬¡æ•°': 1,
        'æœ€å°è®¢å•æ•°é‡': 1
    })
    
    print("âœ… ç´§æ€¥ä¿®å¤å·²åº”ç”¨")
    print("ğŸ’¡ ç³»ç»Ÿç°åœ¨åº”è¯¥å¯ä»¥ç«‹å³å¯åŠ¨æˆ–å¾ˆå¿«å®Œæˆé¢„çƒ­")

if __name__ == "__main__":
    # å¦‚æœç”¨æˆ·ç›´æ¥è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œè¯´æ˜é‡åˆ°äº†é—®é¢˜
    print("æ£€æµ‹åˆ°æ‚¨å¯èƒ½é‡åˆ°äº†é¢„çƒ­å¡ä½é—®é¢˜")
    print("æ­£åœ¨åº”ç”¨ç´§æ€¥ä¿®å¤...")
    emergency_fix()
    print("\nç°åœ¨è¯·é‡æ–°è¿è¡Œä¸»ç¨‹åº: python main.py") 